# 实验X：进程间通信的实现



## 1 实验目的

1. 实现send，recv系统调用
2. 通过进程间通信机制，从时钟进程中获得当前系统时钟信息。

## 2 实验环境



## 3 各子模块的设计



我需要实现几个内核进程，能够相互通信，然后用户进程通过发送消息的方式，得到操作系统的各种服务。如果该消息得不到处理，就出现错误丢弃掉？

内核进程，可以说就是一个任务。

我现在，可以考虑先实现一个时钟任务，通过向该时钟进程发送消息，能够得到目前的时间。

增加printf系统调用。

进程间通信机制的实现。

内核态是否允许被抢占？与CPU寄存器上下文存储的方式有关。



## 遇到的问题

1. 问题一：系统任务（SYS_TASK)在尝试接收消息时，如果接受不了消息，无法阻塞在block函数中。
   1. 原因一：在系统调用中，没有做中断重入，因此在中断内不能够响应时钟中断，无法切换时钟。	
      1. 解决：
   2. 问题：是不需要阻塞在block函数中的，关键问题在于，调用`msg_send_recv `函数后，从函数返回的时候，应该回到另一个进程



问题二：